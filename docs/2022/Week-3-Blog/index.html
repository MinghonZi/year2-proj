<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/year2-proj/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/year2-proj/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/year2-proj/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/year2-proj/images/logo.svg" color="#222">

<link rel="stylesheet" href="/year2-proj/css/main.css">


<link rel="stylesheet" href="/year2-proj/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"minghongalexxu.github.io","root":"/year2-proj/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Date: 14 Feb - 20 Feb At the supervisor meeting on Monday, we identified the actions to be done by the simulation. There are three motions in total, pitch motion, yaw motion, and roll motion. We have">
<meta property="og:type" content="article">
<meta property="og:title" content="Week 3 Blog">
<meta property="og:url" content="https://minghongalexxu.github.io/year2-proj/2022/Week-3-Blog/index.html">
<meta property="og:site_name" content="LivUni ELEC222 Year 2 Project">
<meta property="og:description" content="Date: 14 Feb - 20 Feb At the supervisor meeting on Monday, we identified the actions to be done by the simulation. There are three motions in total, pitch motion, yaw motion, and roll motion. We have">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://minghongalexxu.github.io/year2-proj/2022/Week-3-Blog/Leg-modeling-diagram.jpg">
<meta property="og:image" content="https://minghongalexxu.github.io/year2-proj/2022/Week-3-Blog/pitch-motion-model.jpg">
<meta property="og:image" content="https://minghongalexxu.github.io/year2-proj/2022/Week-3-Blog/roll-motion-model.jpg">
<meta property="og:image" content="https://minghongalexxu.github.io/year2-proj/2022/Week-3-Blog/yaw-motion-model.jpg">
<meta property="article:published_time" content="2022-02-17T16:09:12.000Z">
<meta property="article:modified_time" content="2022-03-04T01:03:54.694Z">
<meta property="article:author" content="Zepeng Pang">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://minghongalexxu.github.io/year2-proj/2022/Week-3-Blog/Leg-modeling-diagram.jpg">

<link rel="canonical" href="https://minghongalexxu.github.io/year2-proj/2022/Week-3-Blog/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>Week 3 Blog | LivUni ELEC222 Year 2 Project</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/year2-proj/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">LivUni ELEC222 Year 2 Project</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Simulation of Quadruped-robot Locomotion</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/year2-proj/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/year2-proj/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://minghongalexxu.github.io/year2-proj/2022/Week-3-Blog/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/year2-proj/images/avatar.gif">
      <meta itemprop="name" content="Zepeng Pang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LivUni ELEC222 Year 2 Project">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Week 3 Blog
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-02-17 16:09:12" itemprop="dateCreated datePublished" datetime="2022-02-17T16:09:12Z">2022-02-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-03-04 01:03:54" itemprop="dateModified" datetime="2022-03-04T01:03:54Z">2022-03-04</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><strong>Date:</strong> 14 Feb - 20 Feb</p>
<p>At the supervisor meeting on Monday, we identified the actions to be done by the simulation. There are three motions in total, pitch motion, yaw motion, and roll motion. We have learned the correct way to control the robot to complete the action by consulting the data. Before the research, we thought the simulation of an action is  the combination of simple movements of multiple joints. In fact, the correct theory should be to control the motor by calculating the coordinates of each key point on the robot body before and after the movement. The three actions we chose apply the idea of the simulation in three directions of space, respectively. This method requires modeling the robot and applying transformation matrices to calculate the hip and foot positions.</p>
<h2 id="Goals-for-week-3"><a href="#Goals-for-week-3" class="headerlink" title="Goals for week 3"></a>Goals for week 3</h2><ol>
<li>Research investigates kinematic modeling of quadruped robots.</li>
<li>Study the matrix transformation of the coordinate system to calculate the coordinates before and after the action.</li>
</ol>
<h2 id="Motion-computation-theory"><a href="#Motion-computation-theory" class="headerlink" title="Motion computation theory"></a>Motion computation theory</h2><h3 id="The-modeling-calculation-of-pitch-motion"><a href="#The-modeling-calculation-of-pitch-motion" class="headerlink" title="The modeling calculation of pitch motion"></a>The modeling calculation of pitch motion</h3><p><img src="/year2-proj/2022/Week-3-Blog/Leg-modeling-diagram.jpg" alt="leg modeling diagram"></p>
<p>The legs of a quadruped robot can be simplified as a two-bar linkage. In the figure below, $\theta_1$ is the hip joint angle, $\theta_2$ is the elbow joint angle, L$_{1}$ is the length of the thigh, L$_{2}$ is the length of the calf, point P represents the foot, and the x-axis represents the robot body. Among them, L$_{1}$ and L$_{2}$ are known, and the initial height of the robot is also fixed, so $\theta_1$ and $\theta_2$ must be two determined values, which can be obtained by calculation. From this, we can determine the coordinates of point P(x,y).</p>
<p><img src="/year2-proj/2022/Week-3-Blog/pitch-motion-model.jpg" alt="pitch motion model"></p>
<p>Next, we draw the modeling diagram of the pitch motion. In the picture above, point O is the center point of the robot’s torso, point A is the coordinates of the hip joint before movement, point B is the coordinates after the movement of the hip joint, L is the distance from the hip joint to the midpoint of the body in the current plane and $\alpha$ is the angle of leaning over. In the above steps we got the coordinates of point P in the stationary state. Next, we move the coordinate system from point A to point O, then rotate the coordinate system clockwise by $\alpha$ angle, and then translate to point B. Find the coordinates of point P in the current coordinate system of point B, and the work is completed. This uses the coordinate system transformation matrix and coordinate transformation matrix knowledge in linear algebra.</p>
<p>A$\rightarrow$O coordinate system transformation matrix:</p>
<p>$$<br>T_1&#x3D;<br>  \begin{bmatrix}<br>    1 &amp; 0 &amp; L \\<br>    0 &amp; 1 &amp; 0 \\<br>    0 &amp; 0 &amp; 1 \\<br>    \end{bmatrix}<br>$$</p>
<p>O$\rightarrow$B coordinate system transformation matrix:</p>
<p>$$<br>T_2&#x3D;<br>  \begin{bmatrix}<br>    cos\alpha &amp; -sin\alpha &amp; -L \\<br>    sin\alpha &amp; cos\alpha &amp; 0 \\<br>    0 &amp; 0 &amp; 1 \\<br>    \end{bmatrix}<br>$$</p>
<p>The coordinate of point P in the coordinate system of point B is:</p>
<p>$$ P_B&#x3D;T_1T_2P_A $$</p>
<p>Next, the angles $\theta_1$ and $\theta_2$ at the two joints can be solved by inverse kinematics. Calculate as follows:</p>
<p>$$ cos\theta_2&#x3D;\frac{-L^2_1-L^2_2+x^2+y^2}{2L_1L_2} $$<br>$$ sin\theta_2&#x3D;\sqrt{\smash[b]{1-cos^2\alpha}} $$<br>$$ \theta_2&#x3D;atan2(sin\theta_2,cos\theta_2) $$<br>$$ \theta_1&#x3D;atan2(y,x)-atan2(L_2sin\theta_2,L_1+L_2cos\theta_2) $$</p>
<p>With the changed angles $\theta_1$ and $\theta_2$ , we know the angle that the motors at the two joints need to rotate.</p>
<p>In summary, once we have designed the $\alpha$ angle, the simulation of the pitch motion can be completed.</p>
<h3 id="The-modeling-calculation-of-roll-motion"><a href="#The-modeling-calculation-of-roll-motion" class="headerlink" title="The modeling calculation of roll motion"></a>The modeling calculation of roll motion</h3><p><img src="/year2-proj/2022/Week-3-Blog/roll-motion-model.jpg" alt="roll motion model"></p>
<p>W is the distance from the hip joint to the midpoint of the fuselage in the current plane. $\beta$ is the angle of rolling. Others are similar to the pitch motion.</p>
<p>The two transformation matrices are:</p>
<p>$$ T_1&#x3D;<br>  \begin{bmatrix}<br>    1 &amp; 0 &amp; 0 &amp; 0 \\<br>    0 &amp; 1 &amp; 0 &amp; W \\<br>    0 &amp; 0 &amp; 1 &amp; 0 \\<br>    0 &amp; 0 &amp; 0 &amp; 1 \\<br>    \end{bmatrix}<br>$$<br>$$ T_2&#x3D;<br>  \begin{bmatrix}<br>    1 &amp; 0 &amp; 0 &amp; 0 \\<br>    0 &amp; cos\beta &amp; -sin\beta &amp; -W \\<br>    0 &amp; sin\beta &amp; cos\beta &amp; 0 \\<br>    0 &amp; 0 &amp; 0 &amp; 1 \\<br>    \end{bmatrix}<br>$$</p>
<p>The coordinates of point P after the movement are:</p>
<p>$$ P’&#x3D;T_2T_1P $$</p>
<p>Then, the two angles at the joint can be solved by inverse kinematics.</p>
<h3 id="The-modeling-calculation-of-yaw-motion"><a href="#The-modeling-calculation-of-yaw-motion" class="headerlink" title="The modeling calculation of yaw motion"></a>The modeling calculation of yaw motion</h3><p><img src="/year2-proj/2022/Week-3-Blog/yaw-motion-model.jpg" alt="yaw motion model"></p>
<p>$\gamma$ is the angle of yawing.</p>
<p>The two transformation matrices are:</p>
<p>$$ T_1&#x3D;<br>  \begin{bmatrix}<br>    1 &amp; 0 &amp; 0 &amp; L \\<br>    0 &amp; 1 &amp; 0 &amp; W \\<br>    0 &amp; 0 &amp; 1 &amp; 0 \\<br>    0 &amp; 0 &amp; 0 &amp; 1 \\<br>    \end{bmatrix}<br>$$<br>$$ T_2&#x3D;<br>  \begin{bmatrix}<br>    cos\gamma &amp; -sin\gamma &amp; 0 &amp; -L \\<br>    sin\gamma &amp; cos\gamma &amp; 0 &amp; -W \\<br>    0 &amp; 0 &amp; 1 &amp; 0 \\<br>    0 &amp; 0 &amp; 0 &amp; 1 \\<br>    \end{bmatrix}<br>$$</p>
<p>The coordinates of point P after the movement are:</p>
<p>$$ P’&#x3D;T_2T_1P $$</p>
<p>Then, the two angles at the joint can be solved by inverse kinematics.</p>
<h2 id="Week-3-summary"><a href="#Week-3-summary" class="headerlink" title="Week 3 summary"></a>Week 3 summary</h2><p>This week we successfully modeled three actions. After modeling, the changes of each variable before and after the action were deduced. The feasibility of the project is verified at the theoretical level. Next, we will start writing the code to complete the simulation of the three actions in pybullet.</p>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/year2-proj/2022/Week-2-Blog/" rel="prev" title="Week 2 Blog">
      <i class="fa fa-chevron-left"></i> Week 2 Blog
    </a></div>
      <div class="post-nav-item">
    <a href="/year2-proj/2022/Week-4-Blog/" rel="next" title="Week 4 Blog">
      Week 4 Blog <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Goals-for-week-3"><span class="nav-number">1.</span> <span class="nav-text">Goals for week 3</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Motion-computation-theory"><span class="nav-number">2.</span> <span class="nav-text">Motion computation theory</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#The-modeling-calculation-of-pitch-motion"><span class="nav-number">2.1.</span> <span class="nav-text">The modeling calculation of pitch motion</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#The-modeling-calculation-of-roll-motion"><span class="nav-number">2.2.</span> <span class="nav-text">The modeling calculation of roll motion</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#The-modeling-calculation-of-yaw-motion"><span class="nav-number">2.3.</span> <span class="nav-text">The modeling calculation of yaw motion</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Week-3-summary"><span class="nav-number">3.</span> <span class="nav-text">Week 3 summary</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Zepeng Pang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/year2-proj/archives/">
        
          <span class="site-state-item-count">4</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zepeng Pang</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/year2-proj/lib/anime.min.js"></script>
  <script src="/year2-proj/lib/velocity/velocity.min.js"></script>
  <script src="/year2-proj/lib/velocity/velocity.ui.min.js"></script>

<script src="/year2-proj/js/utils.js"></script>

<script src="/year2-proj/js/motion.js"></script>


<script src="/year2-proj/js/schemes/pisces.js"></script>


<script src="/year2-proj/js/next-boot.js"></script>




  















  

  

</body>
</html>
